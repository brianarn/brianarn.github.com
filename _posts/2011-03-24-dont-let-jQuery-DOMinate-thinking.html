---
layout: post
title: "Don't let jQuery DOMinate your thinking"
category: thoughts
---
<p>For the past few years, I've been working on a side project at the University of New Mexico. There's not a public-facing aspect to it that's worth highlighting, but the administrative side is a very heavy JavaScript application, but it didn't start that way. There are several 'pages' to the application, each of which is dedicated to a major piece of functionality. As our registered user base has grown, the amount of information that needs to be managed has grown quite a bit, and some of my earlier screens were really starting to slow down.</p>

<p>When we first started building the application, we went with <a href="http://jquery.com">jQuery</a>. I'd been writing JS since before the libraries and toolkits were really on the scene, and remember playing with things like <a href="http://developer.yahoo.com/yui/">YUI</a> 1.0 and <a href="http://prototypejs.org/">Prototype</a> in prior websites, but my coworker/team lead was really keen on trying out this tool that was starting to get some traction.</p>

<p>From a CS perspective, at first, jQuery's interface really bothered me. I liked that Prototype made JS feel a lot more like C++ to me, which was my first real language. It felt like I could build some interaction, using an approach that felt natural and proper to me, like it was somehow "fixing" JS. Also, let's be honest: chaining is ugly. However, jQuery did a better job (or at least made it easier to me) when it came to working with the DOM, and Ajax work was just dead simple (especially when cranking out JSON on the backend), so I stuck with it.</p>

<p>After working in jQuery a bit, I stopped thinking about JavaScript. I let it kind of take over my brain. For awhile, I fell really heavily in love with jQuery. It felt just magical. Things just worked out. Working with IE wasn't as awful (though still not great, of course).</p>

<p>I was quite the fan of jQuery -- and in many ways, I still am. jQuery is really a fantastic tool for doing DOM manipulation and simple Ajax work. The problem is, my application well outgrew simple Ajax work and DOM manipulation.</p>

<p>As the application grew and new functionality was added in, performance really started to sink. It was quite awful. However, I was fortunate enough to have stumbled upon a relatively new podcast named yayQuery. Listening to the yQ crew talk about anti-patterns and hiddenhancements and such, I really grew interested in optimization. When jQuery 1.4 came out, I was ready to take advantage of it, and managed to take one particular page from a load time of ~12 seconds to ~3.</p>

<p>Over this year, I've gone through and created a couple of new screens of functionality to replace some of the worst screens, and tried cleaning up here and there where possible, but on the whole, I realized the major problem I'd ran into was that I stopped thinking about my data as data, and started thinking about it more as DOM. I had been creating ridiculously complex markup with a lot of hidden elements in order to preserve data, rather than using things like jQuery.data to store JS objects. I was also doing things like not saving my resulting jQuery objects, running things like `$("#foo")` repeatedly, not thinking about the impact of creating several new jQuery collections.</p>
